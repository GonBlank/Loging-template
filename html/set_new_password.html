<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Set new password</title>
    <!--Favicon-->
    <link rel="apple-touch-icon" sizes="180x180" href="../img/favicon/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="../img/favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="../img/favicon/favicon-16x16.png" />
    <link rel="manifest" href="../img/favicon/site.webmanifest" />
    <link rel="mask-icon" href="../img/favicon/safari-pinned-tab.svg" color="#5bbad5" />
    <link rel="shortcut icon" href="../img/favicon/favicon.ico" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="msapplication-config" content="../img/favicon/browserconfig.xml" />
    <meta name="theme-color" content="#ffffff" />
    <!--bootstrap icons-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />

    <!--custom stylesheet-->
    <link rel="stylesheet" href="../css/login_style.css" />
</head>

<body>
    <main>
        <form class="card form" name="form" action="../php/update_new_password.php" id="password-recovery-form" method="post">
            <span>
                <h2><i class="bi bi-file-lock2-fill"></i> Restore your password</h2>

            </span>
            <label class="label">
                <input type="password" placeholder=" " class="input" id="sign-up-password" maxlength="20" minlength="8"
                    name="password" autocomplete="new-password" required />
                <span class="label__name"><i style="margin-right: 1rem;" class="bi bi-key-fill"></i> New password</span>
            </label>

            <button class="form-btn password-recovery-btn" id="submit-password-recovery-btn" type="submit">
                <i class="bi bi-arrow-return-right"></i><span><span> RESTORE PASSWORD </span>
            </button>

            <div id="loading-password-recovery-btn" class="content-loading d-none">
                <div class="loading"><i class="bi bi-hourglass-split"></i></div>
            </div>
        </form>
    </main>
</body>

<script>

    document.getElementById('password-recovery-form').addEventListener('submit', function () {
        // Ocultar el botón de submit
        document.getElementById('submit-password-recovery-btn').classList.add('d-none');
        // Mostrar el botón de carga
        document.getElementById('loading-password-recovery-btn').classList.remove('d-none');
    });

</script>
<script>
    // Function to get the hash from the URL
    function getHashFromURL() {
        return window.location.search.substring(1).split('hash=')[1];
    }

    // Add the hash as a hidden input to the form
    document.addEventListener('DOMContentLoaded', (event) => {
        const hash = getHashFromURL();
        const form = document.getElementById('password-recovery-form');

        if (hash) {
            const hashInput = document.createElement('input');
            hashInput.type = 'hidden';
            hashInput.name = 'hash';
            hashInput.value = hash;
            form.appendChild(hashInput);
        }
    });
</script>

</html>